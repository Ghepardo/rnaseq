# NOTE For now these tests don't support any containers beside docker
- name: Run default pipeline with test data
  command: nextflow run main.nf -profile test,docker --outdir results
  tags:
    - default
  files:
    # fastqc
    - path: results/fastqc/RAP1_IAA_30M_REP1_1_fastqc.html
    - path: results/fastqc/RAP1_IAA_30M_REP1_1_fastqc.zip
    - path: results/fastqc/RAP1_IAA_30M_REP1_2_fastqc.html
    - path: results/fastqc/RAP1_IAA_30M_REP1_2_fastqc.zip
    - path: results/fastqc/RAP1_UNINDUCED_REP1_fastqc.html
    - path: results/fastqc/RAP1_UNINDUCED_REP1_fastqc.zip
    - path: results/fastqc/RAP1_UNINDUCED_REP2_fastqc.html
    - path: results/fastqc/RAP1_UNINDUCED_REP2_fastqc.zip
    - path: results/fastqc/WT_REP1_1_fastqc.html
    - path: results/fastqc/WT_REP1_1_fastqc.zip
    - path: results/fastqc/WT_REP1_2_fastqc.html
    - path: results/fastqc/WT_REP1_2_fastqc.zip
    - path: results/fastqc/WT_REP2_1_fastqc.html
    - path: results/fastqc/WT_REP2_1_fastqc.zip
    - path: results/fastqc/WT_REP2_2_fastqc.html
    - path: results/fastqc/WT_REP2_2_fastqc.zip

    # multiqc
    - path: results/multiqc/star_salmon/multiqc_report.html

    # salmon
    - path: results/salmon/salmon.merged.gene_counts_length_scaled.rds
    - path: results/salmon/salmon.merged.gene_counts_length_scaled.tsv
    - path: results/salmon/salmon.merged.gene_counts.rds
    - path: results/salmon/salmon.merged.gene_counts_scaled.rds
    - path: results/salmon/salmon.merged.gene_counts_scaled.tsv
    - path: results/salmon/salmon.merged.gene_counts.tsv
    - path: results/salmon/salmon.merged.gene_tpm.tsv
    - path: results/salmon/salmon.merged.transcript_counts.rds
    - path: results/salmon/salmon.merged.transcript_counts.tsv
    - path: results/salmon/salmon.merged.transcript_tpm.tsv

    # star_salmon
    - path: results/star_salmon/RAP1_IAA_30M_REP1.markdup.sorted.bam
    - path: results/star_salmon/RAP1_IAA_30M_REP1.markdup.sorted.bam.bai
    - path: results/star_salmon/RAP1_UNINDUCED_REP1.markdup.sorted.bam
    - path: results/star_salmon/RAP1_UNINDUCED_REP1.markdup.sorted.bam.bai
    - path: results/star_salmon/RAP1_UNINDUCED_REP2.markdup.sorted.bam
    - path: results/star_salmon/RAP1_UNINDUCED_REP2.markdup.sorted.bam.bai
    - path: results/star_salmon/WT_REP1.markdup.sorted.bam
    - path: results/star_salmon/WT_REP1.markdup.sorted.bam.bai
    - path: results/star_salmon/WT_REP2.markdup.sorted.bam
    - path: results/star_salmon/WT_REP2.markdup.sorted.bam.bai

    # Trimgalore
    - path: results/trimgalore/RAP1_IAA_30M_REP1_1.fastq.gz_trimming_report.txt
    - path: results/trimgalore/RAP1_IAA_30M_REP1_2.fastq.gz_trimming_report.txt
    - path: results/trimgalore/RAP1_UNINDUCED_REP1.fastq.gz_trimming_report.txt
    - path: results/trimgalore/RAP1_UNINDUCED_REP2.fastq.gz_trimming_report.txt
    - path: results/trimgalore/WT_REP1_1.fastq.gz_trimming_report.txt
    - path: results/trimgalore/WT_REP1_2.fastq.gz_trimming_report.txt
    - path: results/trimgalore/WT_REP2_1.fastq.gz_trimming_report.txt
    - path: results/trimgalore/WT_REP2_2.fastq.gz_trimming_report.txt
